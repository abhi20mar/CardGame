<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Playful Question Card üòè</title>

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #ffdde1, #ee9ca7);
  display: flex;
  justify-content: center;
  align-items: center;
}

/* CARD */
.card {
  background: white;
  width: 340px;
  padding: 22px;
  border-radius: 22px;
  text-align: center;
  box-shadow: 0 18px 40px rgba(0,0,0,.25);
  position: relative;
}

/* QUESTION */
.question {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 16px;
}

/* IMAGE */
.image-area {
  height: 180px;
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 14px;
}

.image-area img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* BUTTON PLAYGROUND */
.buttons {
  position: relative;
  height: 140px;
  margin-top: 10px;
  overflow: hidden;
}

/* BUTTONS */
button {
  position: absolute;
  border: none;
  width: 110px;
  height: 44px;
  border-radius: 30px;
  font-size: 16px;
  cursor: pointer;
  transition: left .22s ease, top .22s ease;
}

#yesBtn {
  background: #4caf50;
  color: white;
  left: 10px;
  bottom: 10px;
}

#noBtn {
  background: #f44336;
  color: white;
  right: 10px;
  bottom: 10px;
}

.success {
  font-size: 20px;
  color: #e91e63;
  margin-top: 12px;
  min-height: 26px;
}

/* CONFETTI CANVAS */
#confetti {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 999;
}
</style>
</head>

<body>

<canvas id="confetti"></canvas>

<div class="card">

  <div class="question" id="question">
    Do you love him? üòè
  </div>

  <div class="image-area" id="imageArea">
    <img src="https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif">
  </div>

  <div class="buttons">
    <button id="yesBtn">YES ‚ù§Ô∏è</button>
    <button id="noBtn">NO üôÑ</button>
  </div>

  <div class="success" id="successMsg"></div>

</div>

<!-- SOUND -->
<audio id="successSound"
  src="https://assets.mixkit.co/sfx/preview/mixkit-animated-small-group-applause-523.mp3">
</audio>

<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const arena = document.querySelector(".buttons");

const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");

const sound = document.getElementById("successSound");
const imageArea = document.getElementById("imageArea");
const successMsg = document.getElementById("successMsg");
const question = document.getElementById("question");

/* ---------- CANVAS ---------- */

resizeCanvas();
window.addEventListener("resize", resizeCanvas);

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

/* ---------- NO BUTTON EVASION ---------- */

function moveNoButton() {

  const arenaRect = arena.getBoundingClientRect();
  const yesRect = yesBtn.getBoundingClientRect();

  const btnW = noBtn.offsetWidth;
  const btnH = noBtn.offsetHeight;

  const pad = 10;

  const maxX = arenaRect.width - btnW - pad;
  const maxY = arenaRect.height - btnH - pad;

  let x, y, overlap;

  do {
    x = Math.random() * maxX;
    y = Math.random() * maxY;

    const noRect = {
      left: arenaRect.left + x,
      right: arenaRect.left + x + btnW,
      top: arenaRect.top + y,
      bottom: arenaRect.top + y + btnH
    };

    overlap =
      !(noRect.right < yesRect.left ||
        noRect.left > yesRect.right ||
        noRect.bottom < yesRect.top ||
        noRect.top > yesRect.bottom);

  } while (overlap);

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

/* ---- PROXIMITY ESCAPE ---- */

document.addEventListener("mousemove", e => {
  const r = noBtn.getBoundingClientRect();

  const dist = Math.hypot(
    e.clientX - (r.left + r.width / 2),
    e.clientY - (r.top + r.height / 2)
  );

  if (dist < 85) moveNoButton();
});

document.addEventListener("touchmove", e => {
  const t = e.touches[0];
  const r = noBtn.getBoundingClientRect();

  const dist = Math.hypot(
    t.clientX - (r.left + r.width / 2),
    t.clientY - (r.top + r.height / 2)
  );

  if (dist < 90) moveNoButton();
});

/* FALLBACK */
["mouseenter", "focus", "touchstart"].forEach(evt =>
  noBtn.addEventListener(evt, moveNoButton)
);

/* ---------- YES CLICK ---------- */

yesBtn.addEventListener("click", () => {

  question.textContent = "I knew it üòò‚ù§Ô∏è";

  imageArea.innerHTML = `
    <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif">
  `;

  successMsg.textContent = "Mission successful üíò";

  sound.currentTime = 0;
  sound.play();

  startConfetti();
});

/* ---------- CONFETTI ---------- */

let particles = [];

function startConfetti() {
  particles = [];

  for (let i = 0; i < 180; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: -20,
      size: Math.random() * 8 + 4,
      speed: Math.random() * 4 + 3,
      angle: Math.random() * Math.PI * 2,
      color: `hsl(${Math.random() * 360},100%,60%)`
    });
  }

  requestAnimationFrame(updateConfetti);
}

function updateConfetti() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  particles.forEach(p => {
    p.y += p.speed;
    p.x += Math.sin(p.angle);
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x, p.y, p.size, p.size);
  });

  particles = particles.filter(p => p.y < canvas.height);

  if (particles.length)
    requestAnimationFrame(updateConfetti);
}
</script>

</body>
</html>
